Вот описание логики действий, которые выполняет бот для записи и отслеживания привычек:

### 1. **Начальная регистрация и старт**
   - **Пользователь**: Вводит команду `/start`.
   - **Бот**: Проверяет, существует ли пользователь в базе данных:
     - Если пользователь уже зарегистрирован, бот сообщает об этом.
     - Если пользователь новый, бот создает запись в базе данных и приветствует его, предлагая добавить первую привычку.

### 2. **Добавление привычки**
   - **Пользователь**: Вводит команду `/add_habit <название привычки>`, например, `/add_habit заниматься спортом`.
   - **Бот**:
     - Проверяет, существует ли уже такая привычка у пользователя.
     - Если привычка не найдена, бот добавляет её в базу данных и подтверждает добавление.
     - Если привычка уже существует, бот уведомляет, что она уже добавлена.

### 3. **Отметка выполнения привычки**
   - **Пользователь**: Вводит команду `/complete_habit <название привычки>`, например, `/complete_habit заниматься спортом`.
   - **Бот**:
     - Проверяет, существует ли указанная привычка.
     - Если привычка найдена, бот записывает отметку о её выполнении в текущий день и уведомляет об успешном добавлении.
     - Если привычка не найдена, бот сообщает пользователю, что такая привычка не зарегистрирована.

### 4. **Отправка ежедневных напоминаний**
   - **Бот**: В заданное время отправляет пользователю сообщение с напоминанием о привычках, которые нужно выполнить.
   - **Сообщение**: Включает список всех привычек пользователя, подсказывая, что их нужно отметить как выполненные, если они выполнены.

### 5. **Просмотр списка привычек**
   - **Пользователь**: Вводит команду `/list_habits`.
   - **Бот**: Находит все привычки пользователя в базе данных и отправляет список, например:
     ```
     Ваши привычки:
     - Заниматься спортом
     - Читать 30 минут
     ```

### 6. **Запрос статистики по привычкам**
   - **Пользователь**: Вводит команду `/stats`.
   - **Бот**:
     - Извлекает данные по выполнению привычек пользователя за установленный период (например, за неделю).
     - Отправляет статистику выполнения для каждой привычки:
       ```
       Статистика за последнюю неделю:
       - Заниматься спортом: 5/7 дней
       - Читать 30 минут: 6/7 дней
       ```

### 7. **Удаление привычки**
   - **Пользователь**: Вводит команду `/delete_habit <название привычки>`, например, `/delete_habit читать 30 минут`.
   - **Бот**:
     - Проверяет, существует ли указанная привычка.
     - Если привычка найдена, бот удаляет её из базы данных и подтверждает удаление.
     - Если привычка не найдена, бот сообщает, что такая привычка отсутствует.

### 8. **Ежедневная проверка завершения дня**
   - **Бот** (автоматически): В конце дня (или по команде `/end_day`) проверяет, какие привычки отмечены как выполненные, и фиксирует, что привычка была выполнена или нет.
   - **Сообщение пользователю**: Подводит итоги дня и предлагает план на следующий день.

Эта логика позволяет бот автоматически поддерживать прогресс пользователя, отправлять напоминания и предоставлять удобный доступ к данным.
